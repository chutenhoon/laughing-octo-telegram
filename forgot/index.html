<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Qu&#234;n m&#7853;t kh&#7849;u | polyflux.xyz</title>
    <link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="../android-chrome-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="../android-chrome-512x512.png" />
    <link rel="manifest" href="../site.webmanifest" />
    <link rel="icon" href="../favicon.ico" />
    <meta name="description" content="S&#224;n th&#432;&#417;ng m&#7841;i &#273;i&#7879;n t&#7917; uy t&#237;n, giao nhanh, b&#7843;o h&#224;nh r&#245; r&#224;ng, h&#7895; tr&#7907; 24/7." />
    <meta property="og:title" content="polyflux.xyz" />
    <meta property="og:description" content="S&#224;n th&#432;&#417;ng m&#7841;i &#273;i&#7879;n t&#7917; uy t&#237;n, giao nhanh, b&#7843;o h&#224;nh r&#245; r&#224;ng, h&#7895; tr&#7907; 24/7." />
    <meta property="og:image" content="../asset/logo-preview.png" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="vi_VN" />
    <meta property="og:site_name" content="polyflux.xyz" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="polyflux.xyz" />
    <meta name="twitter:description" content="S&#224;n th&#432;&#417;ng m&#7841;i &#273;i&#7879;n t&#7917; uy t&#237;n, giao nhanh, b&#7843;o h&#224;nh r&#245; r&#224;ng, h&#7895; tr&#7907; 24/7." />
    <meta name="twitter:image" content="../asset/logo-preview.png" />
<link rel="stylesheet" href="../asset/base.css" />
  </head>
  <body>
    <video class="video-bg" autoplay muted loop playsinline preload="metadata">
      <source src="../asset/bg-donut.mp4" type="video/mp4" />
    </video>
    <div class="video-overlay"></div>

    <header class="wrap">
      <nav class="nav glass">
        <a href="/" class="brand" style="display: flex; align-items: center; gap: 12px; text-decoration: none;">
          <img src="../asset/logo.png" alt="PolyFlux" />
          <span>polyflux<b>.xyz</b></span>
        </a>
        <div class="nav-links">
          <a href="/products/" data-nav="sanpham">S&#7843;n Ph&#7849;m <span class="badge">HOT</span></a>
          <a href="/dichvu/" data-nav="dichvu">D&#7883;ch V&#7909;</a>
          <a href="/nhiemvu/" data-nav="nhiemvu">Nhi&#7879;m V&#7909;</a>
          <a href="/profile/topups/" data-nav="topups">N&#7841;p ti&#7873;n</a>
        </div>
        <div class="nav-actions">
                    <button class="btn balance-btn" data-balance type="button">0 VND</button>
          <a class="btn login-btn" href="/login/">Login</a>
        </div>
      </nav>
    </header>

    <main class="wrap">
      <section class="section">
        <div class="card" style="max-width: 520px; margin: 60px auto 0;">
          <h3>Qu&#234;n m&#7853;t kh&#7849;u</h3>
          <p class="hero-sub">Nh&#7853;p email &#273;&#259;ng k&#253; &#273;&#7875; nh&#7853;n li&#234;n k&#7871;t kh&#244;i ph&#7909;c.</p>
          <div class="form-grid">
            <div class="form-field">
              <label for="forgot-email">Email</label>
              <input id="forgot-email" placeholder="you@example.com" autocomplete="email" />
            </div>
            <button class="btn primary" id="forgot-submit" type="button">G&#7917;i link kh&#244;i ph&#7909;c</button>
            <div class="empty-state" id="forgot-empty">
              <strong>L&#432;u &#253;:</strong> Vui l&#242;ng ki&#7875;m tra h&#7897;p th&#432; sau khi g&#7917;i y&#234;u c&#7847;u.
            </div>
            <div class="form-field">
              <span class="hero-sub">Quay l&#7841;i <a href="/login/">&#273;&#259;ng nh&#7853;p</a> ho&#7863;c <a href="/register/">&#273;&#259;ng k&#253;</a></span>
            </div>
          </div>
        </div>
      </section>

      <footer>
        <div class="footer-grid">
          <div>
            <h4>About polyflux.xyz</h4>
            <p>
              The #1 trusted marketplace for digital assets on polyflux.xyz. Buy accounts, emails, tools and more with
              instant delivery.
            </p>
          </div>
          <div>
            <h4>&#272;i&#7873;u h&#432;&#7899;ng</h4>
            <p><a href="/products/">S&#7843;n ph&#7849;m</a></p>
            <p><a href="/dichvu/">D&#7883;ch v&#7909;</a></p>
            <p><a href="/nhiemvu/">Nhi&#7879;m v&#7909; marketplace</a></p>
            <p><a href="/profile/">T&#224;i kho&#7843;n c&#7911;a t&#244;i</a></p>
          </div>
          <div>
            <h4>Thanh to&#225;n &amp; b&#7843;o m&#7853;t</h4>
            <p>20+ ph&#432;&#417;ng th&#7913;c thanh to&#225;n, x&#7917; l&#253; t&#7921; &#273;&#7897;ng.</p>
            <p>L&#7883;ch s&#7917; &#273;&#417;n h&#224;ng minh b&#7841;ch.</p>
            <p>2FA &amp; c&#7843;nh b&#225;o &#273;&#259;ng nh&#7853;p kh&#7843; nghi.</p>
          </div>
          <div>
            <h4>Tham gia b&#225;n h&#224;ng</h4>
            <p>Mu&#7889;n m&#7903; gian h&#224;ng tr&#234;n polyflux.xyz?</p>
            <a href="/seller/join/" class="btn primary" style="margin-top: 8px; display: inline-flex; align-items: center; gap: 6px;">
              Tham gia b&#225;n h&#224;ng
            </a>
          </div>
        </div>
      </footer>
    </main>

    <nav class="mobile-nav">
      <div class="mobile-nav-top">
        <a href="/" class="mobile-brand" style="display: flex; align-items: center; gap: 10px; text-decoration: none;">
          <img src="../asset/logo.png" alt="PolyFlux" />
          <span>polyflux<b>.xyz</b></span>
        </a>
        <div class="mobile-actions">
                    <button class="btn balance-btn" data-balance type="button">0 VND</button>
          <a class="btn login-btn" href="/login/">Login</a>
        
          <button class="menu-btn" id="mobile-menu" type="button" aria-label="Menu">
            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
        </div>
      </div>
      <div class="mobile-links">
        <a href="/products/" data-nav="sanpham">S&#7843;n Ph&#7849;m</a>
        <a href="/dichvu/" data-nav="dichvu">D&#7883;ch V&#7909;</a>
        <a href="/nhiemvu/" data-nav="nhiemvu">Nhi&#7879;m V&#7909;</a>
        <a href="/profile/topups/" data-nav="topups">N&#7841;p ti&#7873;n</a>
      </div>
    </nav>

    <script src="../asset/render.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const submitBtn = document.getElementById("forgot-submit");
        if (!submitBtn) return;
        const emailInput = document.getElementById("forgot-email");
        const emptyState = document.getElementById("forgot-empty");

        const showError = (message) => {
          if (!message) return;
          if (window.BKAuth && typeof window.BKAuth.showToast === "function") {
            window.BKAuth.showToast(message);
            return;
          }
          window.alert(message);
        };

        const updateEmptyState = (message, link) => {
          if (!emptyState) {
            if (message) showError(message);
            return;
          }
          emptyState.textContent = message || "";
          if (link) {
            const anchor = document.createElement("a");
            anchor.href = link;
            anchor.textContent = "Open reset link";
            anchor.target = "_blank";
            anchor.rel = "noreferrer";
            emptyState.appendChild(document.createTextNode(" "));
            emptyState.appendChild(anchor);
          }
        };

        const resolveForgotError = (code) => {
          switch (code) {
            case "INVALID_EMAIL":
              return "Please enter a valid email address.";
            default:
              return "Request failed. Please try again.";
          }
        };

        const handleForgot = () => {
          const email = emailInput && emailInput.value ? emailInput.value.trim() : "";
          if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
            showError("Please enter a valid email address.");
            return;
          }

          submitBtn.disabled = true;
          submitBtn.setAttribute("aria-busy", "true");
          fetch("/api/auth/forgot", {
            method: "POST",
            headers: {
              "content-type": "application/json",
            },
            body: JSON.stringify({ email }),
          })
            .then(async (response) => {
              const data = await response.json().catch(() => null);
              if (!response.ok || !data || !data.ok) {
                showError(resolveForgotError(data && data.error));
                return;
              }
              if (data.resetLink) {
                updateEmptyState("Reset link (test):", data.resetLink);
                return;
              }
              updateEmptyState("If the email exists, a reset link has been generated.");
            })
            .catch(() => {
              showError("Request failed. Please try again.");
            })
            .finally(() => {
              submitBtn.disabled = false;
              submitBtn.removeAttribute("aria-busy");
            });
        };

        submitBtn.addEventListener("click", handleForgot);
      });
    </script>
  </body>
</html>





