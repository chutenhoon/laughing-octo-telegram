<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>Gian h&#224;ng | polyflux.xyz</title>
    <link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="../../android-chrome-192x192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="../../android-chrome-512x512.png" />
    <link rel="manifest" href="../../site.webmanifest" />
    <link rel="icon" href="../../favicon.ico" />
    <meta name="description" content="S&#224;n th&#432;&#417;ng m&#7841;i &#273;i&#7879;n t&#7917; uy t&#237;n, giao nhanh, b&#7843;o h&#224;nh r&#245; r&#224;ng, h&#7895; tr&#7907; 24/7." />
    <meta property="og:title" content="polyflux.xyz" />
    <meta property="og:description" content="S&#224;n th&#432;&#417;ng m&#7841;i &#273;i&#7879;n t&#7917; uy t&#237;n, giao nhanh, b&#7843;o h&#224;nh r&#245; r&#224;ng, h&#7895; tr&#7907; 24/7." />
    <meta property="og:image" content="../../asset/logo-preview.png" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="vi_VN" />
    <meta property="og:site_name" content="polyflux.xyz" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="polyflux.xyz" />
    <meta name="twitter:description" content="S&#224;n th&#432;&#417;ng m&#7841;i &#273;i&#7879;n t&#7917; uy t&#237;n, giao nhanh, b&#7843;o h&#224;nh r&#245; r&#224;ng, h&#7895; tr&#7907; 24/7." />
    <meta name="twitter:image" content="../../asset/logo-preview.png" />
<link rel="stylesheet" href="../../asset/base.css" />
  </head>
  <body>
    <video class="video-bg" autoplay muted loop playsinline preload="metadata">
      <source src="../../asset/bg-donut.mp4" type="video/mp4" />
    </video>
    <div class="video-overlay"></div>

    <header class="wrap">
      <nav class="nav glass">
        <a href="/" class="brand" style="display: flex; align-items: center; gap: 12px; text-decoration: none;">
          <img src="../../asset/logo.png" alt="PolyFlux" />
          <span>polyflux<b>.xyz</b></span>
        </a>
        <div class="nav-links">
          <a href="/sanpham/" data-nav="sanpham">S&#7843;n Ph&#7849;m <span class="badge">HOT</span></a>
          <a href="/dichvu/" data-nav="dichvu">D&#7883;ch V&#7909;</a>
          <a href="/nhiemvu/" data-nav="nhiemvu">Nhi&#7879;m V&#7909;</a>
          <a href="/profile/topups/" data-nav="topups">N&#7841;p ti&#7873;n</a>
        </div>
        <div class="nav-actions">
                    <button class="btn balance-btn" data-balance type="button">0 VND</button>
          <a class="btn login-btn" href="/login/">Login</a>
        </div>
      </nav>
    </header>

    <main class="wrap">
      <section class="product-detail">
        <div class="detail-breadcrumb">
          <a href="/">Trang ch&#7911;</a>
          <span>/</span>
          <span>Gian h&#224;ng</span>
          <span>/</span>
          <span id="seller-crumb">--</span>
        </div>

        <div class="card detail-panel">
          <h1 class="detail-title" id="seller-name">--</h1>
          <p class="detail-short" id="seller-tagline"></p>
          <div class="detail-meta">
            <div class="meta-col">
              <span>&#272;&#225;nh gi&#225;: <strong id="seller-rating">--</strong></span>
              <span>&#272;&#417;n h&#224;ng: <strong id="seller-orders">--</strong></span>
              <span>T&#7915;: <strong id="seller-since">--</strong></span>
            </div>
            <div class="meta-col">
              <span class="seller-line">Danh hi&#7879;u: <span id="seller-badge"></span></span>
              <span>Gian h&#224;ng ID: <strong id="seller-id">--</strong></span>
            </div>
          </div>
          <div class="detail-cta detail-cta-compact" style="margin-top: 12px;">
            <button class="btn primary" type="button">Theo d&#245;i</button>
            <a class="btn ghost" id="seller-contact" href="#" target="_blank" rel="noreferrer">Nh&#7855;n tin</a>
          </div>
        </div>

        <div class="card">
          <h3>S&#7843;n ph&#7849;m t&#7915; gian h&#224;ng</h3>
          <div class="product-grid-luxe" id="seller-products"></div>
          <div class="table-pagination" id="seller-pagination"></div>
        </div>
      </section>
    </main>

    <footer>
      <div class="footer-grid">
        <div>
          <h4>About polyflux.xyz</h4>
          <p>
            The #1 trusted marketplace for digital assets on polyflux.xyz. Buy accounts, emails, tools and more with
            instant delivery.
          </p>
        </div>
        <div>
          <h4>&#272;i&#7873;u h&#432;&#7899;ng</h4>
          <p><a href="/sanpham/">S&#7843;n ph&#7849;m</a></p>
          <p><a href="/dichvu/">D&#7883;ch v&#7909;</a></p>
          <p><a href="/nhiemvu/">Nhi&#7879;m v&#7909; marketplace</a></p>
          <p><a href="/profile/">T&#224;i kho&#7843;n c&#7911;a t&#244;i</a></p>
        </div>
        <div>
          <h4>Thanh to&#225;n &amp; b&#7843;o m&#7853;t</h4>
          <p>20+ ph&#432;&#417;ng th&#7913;c thanh to&#225;n, x&#7917; l&#253; t&#7921; &#273;&#7897;ng.</p>
          <p>L&#7883;ch s&#7917; &#273;&#417;n h&#224;ng minh b&#7841;ch.</p>
          <p>2FA &amp; c&#7843;nh b&#225;o &#273;&#259;ng nh&#7853;p kh&#7843; nghi.</p>
        </div>
        <div>
          <h4>Tham gia b&#225;n h&#224;ng</h4>
          <p>Mu&#7889;n m&#7903; gian h&#224;ng tr&#234;n polyflux.xyz?</p>
          <a
            href="/seller/join/"
            class="btn primary"
            style="margin-top: 8px; display: inline-flex; align-items: center; gap: 6px;"
          >
            Tham gia b&#225;n h&#224;ng
          </a>
        </div>
      </div>
    </footer>

    <nav class="mobile-nav">
      <div class="mobile-nav-top">
        <a href="/" class="mobile-brand" style="display: flex; align-items: center; gap: 10px; text-decoration: none;">
          <img src="../../asset/logo.png" alt="PolyFlux" />
          <span>polyflux<b>.xyz</b></span>
        </a>
        <div class="mobile-actions">
                    <button class="btn balance-btn" data-balance type="button">0 VND</button>
          <a class="btn login-btn" href="/login/">Login</a>
        
          <button class="menu-btn" id="mobile-menu" type="button" aria-label="Menu">
            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M4 6h16M4 12h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
            </svg>
          </button>
        </div>
      </div>
      <div class="mobile-links">
        <a href="/sanpham/" data-nav="sanpham">S&#7843;n Ph&#7849;m</a>
        <a href="/dichvu/" data-nav="dichvu">D&#7883;ch V&#7909;</a>
        <a href="/nhiemvu/" data-nav="nhiemvu">Nhi&#7879;m V&#7909;</a>
        <a href="/profile/topups/" data-nav="topups">N&#7841;p ti&#7873;n</a>
      </div>
    </nav>

    <script src="../../asset/render.js"></script>
    <script>
      (async function initSeller() {
        const params = new URLSearchParams(window.location.search);
        const sellerId = params.get("id");
        const sellers = await loadJSON("../../data/mock-sellers.json");
        const products = await loadJSON("../../data/mock-products.json");
        const seller = sellers.find((s) => s.id === sellerId) || sellers[0];

        const renderSellerBadge = (data) => {
          if (!data || !data.badge) return "";
          const raw = String(data.badge || "").trim().toUpperCase();
          if (!raw) return "";
          if (raw === "ADMIN") {
            return `<span class="seller-badge admin">Admin</span>`;
          }
          if (raw === "VERIFIED") {
            return `<span class="seller-badge verified">&#272;&#227; X&#225;c Th&#7921;c</span>`;
          }
          if (raw.startsWith("MERCHANT-")) {
            const tier = raw.replace("MERCHANT-", "");
            const tierClass = tier.toLowerCase();
            return `<span class="seller-badge merchant merchant-${tierClass}">Th&#432;&#417;ng Nh&#226;n B&#7853;c ${tier}</span>`;
          }
          return "";
        };

        const setText = (id, value) => {
          const el = document.getElementById(id);
          if (el) el.textContent = value == null ? "--" : value;
        };

        if (!seller) return;
        setText("seller-name", seller.name);
        setText("seller-crumb", seller.name);
        setText("seller-rating", seller.rating ?? "--");
        setText("seller-orders", seller.orders ?? "--");
        setText("seller-since", seller.since ?? "--");
        setText("seller-id", seller.id ?? "--");

        const badgeEl = document.getElementById("seller-badge");
        if (badgeEl) badgeEl.innerHTML = renderSellerBadge(seller);

        const contact = document.getElementById("seller-contact");
        if (contact) contact.href = seller.contact || "https://t.me/DTPlatinum";

        const tagline = document.getElementById("seller-tagline");
        if (tagline) {
          tagline.innerHTML = "Gian h&#224;ng uy t&#237;n, giao nhanh v&#224; h&#7895; tr&#7907; minh b&#7841;ch.";
        }

        const list = document.getElementById("seller-products");
        const pagination = document.getElementById("seller-pagination");
        const PAGE_SIZE = 10;
        const PAGE_WINDOW = 5;
        let currentPage = 1;
        let pageWindowStart = 1;
        let totalPages = 1;
        if (!list) return;
        const items = products.filter((p) => p.sellerId === seller.id);

        const renderPagination = (total) => {
          if (!pagination) return;
          pagination.innerHTML = "";
          if (total <= 1) return;

          const windowEnd = Math.min(pageWindowStart + PAGE_WINDOW - 1, total);
          const fragment = document.createDocumentFragment();

          for (let page = pageWindowStart; page <= windowEnd; page += 1) {
            const btn = document.createElement("button");
            btn.type = "button";
            btn.className = page === currentPage ? "btn primary" : "btn ghost";
            btn.textContent = String(page);
            btn.dataset.page = String(page);
            fragment.appendChild(btn);
          }

          if (total > PAGE_WINDOW) {
            const nextBtn = document.createElement("button");
            nextBtn.type = "button";
            nextBtn.className = "btn ghost";
            nextBtn.textContent = "+";
            nextBtn.dataset.pageWindow = "next";
            fragment.appendChild(nextBtn);
          }

          pagination.appendChild(fragment);
        };

        const renderSellerProducts = () => {
          if (!items.length) {
            list.innerHTML = `<div class="card empty-state" style="grid-column: 1 / -1;">Ch&#432;a c&#243; s&#7843;n ph&#7849;m.</div>`;
            if (pagination) pagination.innerHTML = "";
            return;
          }

          totalPages = Math.max(1, Math.ceil(items.length / PAGE_SIZE));
          if (currentPage > totalPages) currentPage = totalPages;
          const start = (currentPage - 1) * PAGE_SIZE;
          const pageItems = items.slice(start, start + PAGE_SIZE);

          const root = getProjectRoot();
          list.innerHTML = pageItems
            .map((p) => {
              const media = p.image
                ? `<img src="${root + p.image}" alt="${p.name}" loading="lazy" />`
                : `<div class="product-fallback">${(p.subcategory || "BK").slice(0, 2)}</div>`;
              const priceLabel = formatPriceRange(p);
              const priceAttrs =
                typeof p.priceMax === "number" && p.priceMax > p.price
                  ? `data-base-min="${p.price}" data-base-max="${p.priceMax}" data-base-currency="VND"`
                  : `data-base-amount="${p.price}" data-base-currency="VND"`;
              return `
                <a class="product-card" href="${getProductDetailPath(p.id)}">
                  <div class="product-media">${media}</div>
                  <div class="product-body">
                    <div class="product-price" ${priceAttrs}>${priceLabel}</div>
                    <h3 class="product-title">${p.name}</h3>
                    <div class="product-meta">
                      <span>Kho: <strong>${p.stock ?? "--"}</strong></span>
                      <span>&#272;&#227; b&#225;n: <strong>${p.orders ?? "--"}</strong></span>
                    </div>
                    <p class="product-desc">${p.short || ""}</p>
                  </div>
                </a>
              `;
            })
            .join("");
          if (window.BKCurrency && typeof window.BKCurrency.applyToDom === "function") {
            window.BKCurrency.applyToDom(list);
          }
          renderPagination(totalPages);
        };

        if (pagination) {
          pagination.addEventListener("click", (event) => {
            const button = event.target.closest("button");
            if (!button) return;
            if (button.dataset.page) {
              currentPage = Number(button.dataset.page);
              renderSellerProducts();
              list.scrollIntoView({ behavior: "smooth", block: "start" });
              return;
            }
            if (button.dataset.pageWindow === "next") {
              const nextStart = pageWindowStart + PAGE_WINDOW;
              pageWindowStart = nextStart > totalPages ? 1 : nextStart;
              currentPage = pageWindowStart;
              renderSellerProducts();
              list.scrollIntoView({ behavior: "smooth", block: "start" });
            }
          });
        }

        renderSellerProducts();
      })();
    </script>
  </body>
</html>









